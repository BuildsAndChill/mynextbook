# ========================================
# CONFIGURATION DE BASE RAILS
# ========================================

# Environnement Rails
RAILS_ENV=development

# Nombre maximum de threads pour Puma
RAILS_MAX_THREADS=5

# Clé secrète de base (générée automatiquement par Rails)
# Rails la génère automatiquement, pas besoin de la définir manuellement

# ========================================
# BASE DE DONNÉES
# ========================================

# Base de données de développement (Neon)
DATABASE_URL_DEV=postgresql://username:password@neon-host/database_name

# Base de données de test (peut être la même que dev)
# DATABASE_URL_TEST=postgresql://username:password@neon-host/test_database_name

# Base de données de production (Render)
DATABASE_URL_PROD=postgresql://username:password@render-host/production_database_name


# ========================================
# API KEYS EXTERNES
# ========================================

# OpenAI API Key pour les recommandations de livres
OPENAI_API_KEY=sk-your-openai-api-key-here

# Google Books API Key pour les métadonnées des livres
GOOGLE_BOOKS_API_KEY=your-google-books-api-key-here

# Google Custom Search API pour les liens directs vers les livres
# Permet d'obtenir des liens directs vers Goodreads, Amazon, etc. au lieu de liens de recherche génériques

# Voir GOOGLE_CUSTOM_SEARCH_SETUP.md pour la configuration complète
GOOGLE_CUSTOM_SEARCH_API_KEY=your-google-custom-search-api-key-here
GOOGLE_CUSTOM_SEARCH_ENGINE_ID=your-search-engine-id-here

# ========================================
# MODIFICATEUR DE RECHERCHE POUR LES LIENS
# ========================================

# Modificateur à ajouter lors de la recherche de liens pour les cards
# Exemples :
# - "goodreads" → recherche sur Goodreads
# - "amazon" → recherche sur Amazon
# - "bookdepository" → recherche sur Book Depository
# - "librairie" → recherche sur une librairie française
SEARCH_MODIFIER=amazon

# ========================================
# CONFIGURATION DE DÉVELOPPEMENT
# ========================================

# Mode debug pour afficher les informations de debug dans l'UI
debug_mode=true

# Désactiver l'IA temporairement (optionnel, pour les tests)
# AI_DISABLED=1

# Limite du nombre de livres à importer (pour les tests)
# Mettre à 0 pour importer tous les livres, ou un nombre spécifique (ex: 50, 100)
IMPORT_BOOKS_LIMIT=0

# ========================================
# SÉCURITÉ ADMIN (MVP)
# ========================================

# Mot de passe pour accéder à l'interface d'administration
# Ce mot de passe protège l'accès aux routes /admin/*
ADMIN_PASSWORD=your-secure-admin-password-here

# ========================================
# CONFIGURATION DU TRACKING UTILISATEUR
# ========================================

# Niveau de tracking (MVP - valeurs par défaut de production)
# 'no' = pas de tracking (pour désactiver complètement)
# 'minimal' = seulement les actions critiques (recommandations, emails)
# 'standard' = actions critiques + page views (⭐ NIVEAU PAR DÉFAUT PRODUCTION)
# 'full' = tout est tracké (pour le développement/analyse)
#
# ⚠️  IMPORTANT: Si cette variable n'est pas définie, l'application utilise
#     automatiquement 'standard' (niveau de production optimal)
TRACKING_LEVEL=standard

# Fréquence de sauvegarde (pour les performances)
# 'immediate' = sauvegarde immédiate (plus précis mais plus lent)
# 'batch' = sauvegarde par lot (⭐ NIVEAU PAR DÉFAUT PRODUCTION)
# 'async' = sauvegarde asynchrone (le plus rapide)
#
# ⚠️  IMPORTANT: Si cette variable n'est pas définie, l'application utilise
#     automatiquement 'batch' (performance optimale)
TRACKING_SAVE_MODE=batch

# Taille des lots pour le mode batch (défaut: 50)
# ⚠️  Valeur par défaut si non définie
TRACKING_BATCH_SIZE=50

# Délai max avant sauvegarde en secondes (défaut: 300 = 5 min)
# ⚠️  Valeur par défaut si non définie
TRACKING_MAX_DELAY=300

# Finetuning du tracking (peut surcharger le niveau)
# Activer le tracking des pages vues
TRACK_PAGE_VIEWS=true

# Activer le tracking des clics sur boutons
TRACK_BUTTON_CLICKS=false

# Activer le tracking des métadonnées (IP, User-Agent)
TRACK_METADATA=true

# Limite interactions par session (0 = illimité, défaut: 100)
TRACKING_SESSION_LIMIT=100

# Nettoyage auto des anciennes sessions en jours (0 = pas de nettoyage, défaut: 30)
TRACKING_CLEANUP_DAYS=30

# Mode debug (défaut: false en production)
TRACKING_DEBUG=false

# ========================================
# EXEMPLES DE CONFIGURATIONS
# ========================================

# 🚀 PRODUCTION (Performance optimale)
# TRACKING_LEVEL=standard
# TRACKING_SAVE_MODE=batch
# TRACKING_BATCH_SIZE=100
# TRACKING_MAX_DELAY=300

# 🔍 DÉVELOPPEMENT (Analyse complète)
# TRACKING_LEVEL=full
# TRACKING_SAVE_MODE=immediate
# TRACKING_DEBUG=true

# ⚡ TEST (Minimal)
# TRACKING_LEVEL=minimal
# TRACKING_SAVE_MODE=batch

# 🚫 DÉSACTIVATION
# TRACKING_LEVEL=no

# ========================================
# CONFIGURATION EMAIL
# ========================================

# Configuration Resend (SERVICE PRINCIPAL - obligatoire)
# Priorité: Resend > File storage
RESEND_API_KEY=your-resend-api-key-here
RESEND_DOMAIN=mynextbook.buildsandchill.com

# Configuration Gmail pour le développement local (optionnel)
# Permet d'économiser les appels API Resend en développement
# Décommenter et configurer si vous voulez utiliser Gmail en local
# SMTP_ADDRESS=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password

# Configuration de l'expéditeur par défaut
MAILER_SENDER=noreply@mynextbook.com

# ========================================
# NOTES IMPORTANTES
# ========================================

# 1. Remplace username:password@neon-host/database_name par tes vraies infos Neon
# 2. Remplace sk-your-openai-api-key-here par ta vraie clé OpenAI
# 3. Remplace your-google-books-api-key-here par ta vraie clé Google Books
# 4. Remplace your-google-custom-search-api-key-here par ta vraie clé Google Custom Search
# 5. Remplace your-search-engine-id-here par ton Search Engine ID Google
# 6. Ce fichier .env ne doit JAMAIS être commité sur GitHub
# 7. Pour la production, ces variables sont configurées via Render
# 8. L'API Google Custom Search a une limite de 100 requêtes gratuites par jour
# 9. Pour Gmail : Utilise un "App Password" au lieu de ton mot de passe normal

# ========================================
# NOTES IMPORTANTES EMAIL
# ========================================
#
# 1. RESEND_API_KEY et RESEND_DOMAIN sont OBLIGATOIRES pour la production
# 2. Gmail est optionnel et peut être activé en décommentant les lignes SMTP
# 3. Si aucun service n'est configuré, les emails sont stockés localement (tmp/mails/)
# 4. Pour activer Gmail en développement, décommenter les lignes SMTP et redémarrer le serveur
