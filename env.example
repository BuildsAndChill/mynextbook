# ========================================
# CONFIGURATION DE BASE RAILS
# ========================================

# Environnement Rails
RAILS_ENV=development

# Nombre maximum de threads pour Puma
RAILS_MAX_THREADS=5

# Clé secrète de base (générée automatiquement par Rails)
# Rails la génère automatiquement, pas besoin de la définir manuellement

# ========================================
# BASE DE DONNÉES
# ========================================

# Base de données de développement (Neon)
DATABASE_URL_DEV=postgresql://username:password@neon-host/database_name

# Base de données de test (peut être la même que dev)
# DATABASE_URL_TEST=postgresql://username:password@neon-host/test_database_name

# Base de données de production (Render)
DATABASE_URL_PROD=postgresql://username:password@render-host/production_database_name

# ========================================
# API KEYS EXTERNES
# ========================================

# OpenAI API Key pour les recommandations de livres
OPENAI_API_KEY=sk-your-openai-api-key-here

# Google Books API Key pour les métadonnées des livres
GOOGLE_BOOKS_API_KEY=your-google-books-api-key-here

# Google Custom Search API pour les liens directs vers les livres
# Permet d'obtenir des liens directs vers Goodreads, Amazon, etc. au lieu de liens de recherche génériques
# Voir GOOGLE_CUSTOM_SEARCH_SETUP.md pour la configuration complète
GOOGLE_CUSTOM_SEARCH_API_KEY=your-google-custom-search-api-key-here
GOOGLE_CUSTOM_SEARCH_ENGINE_ID=your-search-engine-id-here

# ========================================
# MODIFICATEUR DE RECHERCHE POUR LES LIENS
# ========================================

# Modificateur à ajouter lors de la recherche de liens pour les cards
# Exemples :
# - "goodreads" → recherche sur Goodreads
# - "amazon" → recherche sur Amazon
# - "bookdepository" → recherche sur Book Depository
# - "librairie" → recherche sur une librairie française
SEARCH_MODIFIER=amazon

# ========================================
# CONFIGURATION DE DÉVELOPPEMENT
# ========================================

# Mode debug pour afficher les informations de debug dans l'UI
debug_mode=true

# Désactiver l'IA temporairement (optionnel, pour les tests)
# AI_DISABLED=1

# Limite du nombre de livres à importer (pour les tests)
# Mettre à 0 pour importer tous les livres, ou un nombre spécifique (ex: 50, 100)
IMPORT_BOOKS_LIMIT=0

# ========================================
# CONFIGURATION EMAIL ET SERVEUR MAIL
# ========================================

# Configuration SMTP pour Devise et envoi d'emails
# Gmail (recommandé pour le développement)
SMTP_ADDRESS=smtp.gmail.com
SMTP_PORT=587
SMTP_DOMAIN=gmail.com
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true

# Alternative : SendGrid (recommandé pour la production)
# SMTP_ADDRESS=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_DOMAIN=yourdomain.com
# SMTP_USERNAME=apikey
# SMTP_PASSWORD=your-sendgrid-api-key
# SMTP_AUTHENTICATION=plain
# SMTP_ENABLE_STARTTLS_AUTO=true

# Alternative : Mailgun
# SMTP_ADDRESS=smtp.mailgun.org
# SMTP_PORT=587
# SMTP_DOMAIN=yourdomain.com
# SMTP_USERNAME=your-mailgun-username
# SMTP_PASSWORD=your-mailgun-password
# SMTP_AUTHENTICATION=plain
# SMTP_ENABLE_STARTTLS_AUTO=true

# Alternative : Amazon SES
# SMTP_ADDRESS=email-smtp.us-east-1.amazonaws.com
# SMTP_PORT=587
# SMTP_DOMAIN=yourdomain.com
# SMTP_USERNAME=your-ses-smtp-username
# SMTP_PASSWORD=your-ses-smtp-password
# SMTP_AUTHENTICATION=plain
# SMTP_ENABLE_STARTTLS_AUTO=true

# Configuration de l'expéditeur par défaut
MAILER_SENDER=noreply@yourdomain.com
MAILER_REPLY_TO=support@yourdomain.com

# Configuration des emails de recommandations
RECOMMENDATIONS_EMAIL_FROM=noreply@yourdomain.com
RECOMMENDATIONS_EMAIL_REPLY_TO=support@yourdomain.com

# Limite d'envoi d'emails (pour éviter le spam)
MAX_EMAILS_PER_DAY=1000
MAX_EMAILS_PER_HOUR=100
MAX_EMAILS_PER_MINUTE=10

# Configuration des templates d'emails
EMAIL_TEMPLATE_PATH=app/views/mailers
EMAIL_LAYOUT_PATH=app/views/layouts/mailer

# ========================================
# CONFIGURATION EMAILS DE RECOMMANDATIONS
# ========================================

# Fréquence d'envoi des emails de recommandations
RECOMMENDATIONS_EMAIL_FREQUENCY=daily
# Options : daily, weekly, monthly, on_demand

# Délai avant envoi du premier email (en heures)
FIRST_EMAIL_DELAY=24

# Limite d'emails par utilisateur par période
MAX_EMAILS_PER_USER_PER_DAY=1
MAX_EMAILS_PER_USER_PER_WEEK=3
MAX_EMAILS_PER_USER_PER_MONTH=10

# Configuration des emails de bienvenue
WELCOME_EMAIL_ENABLED=true
WELCOME_EMAIL_DELAY=1

# Configuration des emails de suivi
FOLLOW_UP_EMAIL_ENABLED=true
FOLLOW_UP_EMAIL_DELAY=72

# Configuration des emails de réactivation
REACTIVATION_EMAIL_ENABLED=true
REACTIVATION_EMAIL_DELAY=168

# Configuration des emails de recommandations personnalisées
PERSONALIZED_RECOMMENDATIONS_ENABLED=true
PERSONALIZED_RECOMMENDATIONS_FREQUENCY=weekly

# Configuration des emails de découverte
DISCOVERY_EMAIL_ENABLED=true
DISCOVERY_EMAIL_FREQUENCY=monthly

# Configuration des emails de newsletter
NEWSLETTER_EMAIL_ENABLED=true
NEWSLETTER_EMAIL_FREQUENCY=weekly

# Configuration des emails de feedback
FEEDBACK_EMAIL_ENABLED=true
FEEDBACK_EMAIL_DELAY=48

# Configuration des emails de partage
SHARING_EMAIL_ENABLED=true
SHARING_EMAIL_DELAY=24

# ========================================
# SERVICES D'EMAIL MARKETING TIERS
# ========================================

# Mailchimp (optionnel)
MAILCHIMP_API_KEY=your-mailchimp-api-key
MAILCHIMP_LIST_ID=your-mailchimp-list-id
MAILCHIMP_SERVER_PREFIX=us1

# SendGrid Marketing (optionnel)
SENDGRID_MARKETING_API_KEY=your-sendgrid-marketing-api-key
SENDGRID_CONTACT_LIST_ID=your-sendgrid-contact-list-id

# ConvertKit (optionnel)
CONVERTKIT_API_KEY=your-convertkit-api-key
CONVERTKIT_FORM_ID=your-convertkit-form-id

# ActiveCampaign (optionnel)
ACTIVECAMPAIGN_API_KEY=your-activecampaign-api-key
ACTIVECAMPAIGN_URL=your-activecampaign-url

# Klaviyo (optionnel)
KLAVIYO_API_KEY=your-klaviyo-api-key
KLAVIYO_LIST_ID=your-klaviyo-list-id

# HubSpot (optionnel)
HUBSPOT_API_KEY=your-hubspot-api-key
HUBSPOT_PORTAL_ID=your-hubspot-portal-id

# ========================================
# CONFIGURATION EMAILS TRANSACTIONNELS
# ========================================

# Emails de confirmation d'inscription
CONFIRMATION_EMAIL_ENABLED=true
CONFIRMATION_EMAIL_TEMPLATE=confirmation_instructions

# Emails de réinitialisation de mot de passe
PASSWORD_RESET_EMAIL_ENABLED=true
PASSWORD_RESET_EMAIL_TEMPLATE=reset_password_instructions

# Emails de changement d'email
EMAIL_CHANGE_EMAIL_ENABLED=true
EMAIL_CHANGE_EMAIL_TEMPLATE=email_changed

# Emails de déverrouillage de compte
UNLOCK_EMAIL_ENABLED=true
UNLOCK_EMAIL_TEMPLATE=unlock_instructions

# ========================================
# CONFIGURATION SÉCURITÉ EMAILS
# ========================================

# Vérification des domaines d'email autorisés
ALLOWED_EMAIL_DOMAINS=gmail.com,yahoo.com,outlook.com,hotmail.com
BLOCKED_EMAIL_DOMAINS=tempmail.com,10minutemail.com

# Configuration SPF/DKIM (pour la délivrabilité)
SPF_RECORD=v=spf1 include:_spf.yourdomain.com ~all
DKIM_SELECTOR=default

# Configuration des en-têtes de sécurité
SECURITY_HEADERS_ENABLED=true
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block

# Configuration des liens de sécurité
SECURE_LINKS_ENABLED=true
SECURE_LINKS_EXPIRY=24
SECURE_LINKS_SIGNING_KEY=your-secure-links-signing-key

# ========================================
# CONFIGURATION DE SÉCURITÉ
# ========================================

# Hosts autorisés en développement
# Rails autorise déjà localhost et .onrender.com

# ========================================
# NOTES IMPORTANTES
# ========================================

# 1. Remplace username:password@neon-host/database_name par tes vraies infos Neon
# 2. Remplace sk-your-openai-api-key-here par ta vraie clé OpenAI
# 3. Remplace your-google-books-api-key-here par ta vraie clé Google Books
# 4. Remplace your-google-custom-search-api-key-here par ta vraie clé Google Custom Search
# 5. Remplace your-search-engine-id-here par ton Search Engine ID Google
# 6. Ce fichier .env ne doit JAMAIS être commité sur GitHub
# 7. Pour la production, ces variables sont configurées via Render
# 8. L'API Google Custom Search a une limite de 100 requêtes gratuites par jour

# ========================================
# CONFIGURATION EMAIL - NOTES IMPORTANTES
# ========================================

# 9. Pour Gmail : Utilise un "App Password" au lieu de ton mot de passe normal
# 10. Pour SendGrid : L'API key est dans le format "SG.xxxxxxxxxxxxxxxxxxxxx"
# 11. Pour Mailgun : L'API key est dans le format "key-xxxxxxxxxxxxxxxxxxxxx"
# 12. Pour Amazon SES : Configure d'abord la vérification du domaine
# 13. Les limites d'emails sont importantes pour éviter d'être marqué comme spam
# 14. Configure SPF et DKIM pour améliorer la délivrabilité des emails
# 15. Teste toujours l'envoi d'emails en développement avant la production
# 16. Utilise des services comme Mailtrap pour tester en développement
# 17. Respecte les lois anti-spam (CAN-SPAM, RGPD) dans tes emails
